package notification

import (
	"github.com/go-toast/toast"
	"golang.org/x/sys/windows/registry"
)

// ShowToast only support windows 10
func ShowToast(AppID, Title, Message string) bool {

    k, err := registry.OpenKey(registry.LOCAL_MACHINE, `SOFTWARE\Microsoft\Windows NT\CurrentVersion`, registry.QUERY_VALUE)
    if err != nil {
        return false
    }
    defer k.Close()

    maj, _, err := k.GetIntegerValue("CurrentMajorVersionNumber")
    if err == nil && maj >= 10 {
		notification := toast.Notification{
			AppID: AppID,
			Title: Title,
			Message: Message,
			Actions: []toast.Action{
				{"protocol", "Click Here", ""},
			},
		}
		err := notification.Push()
		if err == nil {
			return true
		}	
	}
	return false
}
